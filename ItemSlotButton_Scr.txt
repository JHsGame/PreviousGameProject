using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class ItemSlotButton_Scr : MonoBehaviour
{
    private ItemSlot_Scr slotScr;
    private ItemSlotCaching_Scr cashingScr;

    public void SetScript(ItemSlot_Scr scr1, ItemSlotCaching_Scr scr2)
    {
        slotScr = scr1;
        cashingScr = scr2;
    }

    // 아이템을 클릭하였을 때 버튼이 나오게 할 필요가 굳이 있을까 싶음.
    public void OnClickSlot()
    {
        cashingScr.ButtonPanel.SetActive(true);
    }

    public void OnClickOutWindow()
    {
        cashingScr.ButtonPanel.SetActive(false);
    }

    public void OnSelectCombinationOrSell()
    {
        // 조합 혹은 판매 모드일 때에만 선택이 가능하고, 해당 모드들에 따라 조합이나 판매에 들어가도록 설정.
        if (InventoryCaching_Scr.instance.SellMode || InventoryCaching_Scr.instance.CombinationMode)
        {
            if (!slotScr.isSelected)
            {
                slotScr.isSelected = true;
                slotScr.CheckImageOn();

                if (InventoryCaching_Scr.instance.CombinationMode)
                {
                    Inventory_Scr.instance.SetCombinationSlot(slotScr.itemLevel, slotScr);
                }
                else if (InventoryCaching_Scr.instance.SellMode)
                {
                    Inventory_Scr.instance.SetSellSlot(slotScr);
                }
            }
            else
            {
                slotScr.isSelected = false;
                slotScr.CheckImageOff();

                if (InventoryCaching_Scr.instance.CombinationMode)
                {
                    Inventory_Scr.instance.RejectCombination(slotScr);
                }
                else if (InventoryCaching_Scr.instance.SellMode)
                {
                    Inventory_Scr.instance.RejectSell(slotScr);
                }
            }
        }
    }
}